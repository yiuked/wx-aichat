# 项目名称

功能
- 自动回复
- 超出500字展示详情
- 自动发布到订阅号草稿

微信个人订阅号/公众号对接OpenAI（ChatGPT），个人订阅/公众号在对接OpenAI接口的过程会面临以下问题
- 微信自动回复5秒超时问题
- 微信自动回复500字超长问题

5秒超时问题，主要做了以下处理，首次提问会提交到OpenAI,如果OpenAI在5秒回复，将正常返回给客户端。如果超过5秒，微信第一次重复将从数据库中获取结果
如仍未有结果，则等待第二次尝试，如果第二次仍失败，提示用户重试
PS：如果是服务号建议直接对接客服信息，体验会更好

500字超长问题，超出500字，加入详情页，发客户端发送链接

不足之处：由于中途加入mongodb做了一次缓冲，因此在进行对话时，没有上下文关联

演示：微信搜索"虾客君"

## 安装

1. 安装依赖

   ```bash
   make install
   ```

   在目录下创建`.env`文件
   ```
   WX_APPID:
   WX_SECRET:
   WX_TOKEN:
   WX_MEDIA_ID:  # 发布到草稿默认的图片ID
   WX_OPEN_ID:   # 发布者在订阅号下的openid
   WX_AUTHOR:    # 自定义发布者名称
   AI_TOKEN:
   DATA_SOURCE:  # mongodb 数据源
   HOST:         # 接口链接地址，如`http://example.com/
   ```

## 贡献者

- yiuked